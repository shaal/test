uuid: 9844f03a-9a96-403e-93a4-7296931d87f0
langcode: en
status: true
dependencies:
  enforced:
    module:
      - towerhealth_msow_migration
id: towerhealth_providers_languages
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: null
label: 'Import tower health provider languages spoken'
source:
  plugin: csv
  path: 'public://directory/Find_Provider_Dir_Languages.txt'
  delimiter: '|'
  header_row_count: 1
  ids:
    - practioner_id
  track_changes: true
  fields:
    -
      name: practioner_id
      label: 'Practioner ID'
    -
      name: language
      label: Language
process:
  nid:
    -
      plugin: migration_lookup
      migration: towerhealth_providers
      no_stub: true
      source: practioner_id
    -
      plugin: skip_on_empty
      method: row
    -
      plugin: entity_load_field
      entity_type: node
      field_name: nid
    -
      plugin: extract
      index:
        - 0
        - value
  title:
    -
      plugin: get
      source: '@nid'
    -
      plugin: entity_load_field
      entity_type: node
      field_name: title
    -
      plugin: extract
      index:
        - 0
        - value
  _languages:
    plugin: towerhealth_append_values
    source: language
    nid: '@nid'
    field: field_profile_languages
  field_profile_languages: '@_languages'
destination:
  plugin: 'entity:node'
migration_dependencies: null
